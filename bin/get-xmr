#!/usr/bin/env python3
import requests
import os
from time import sleep
from bs4 import BeautifulSoup

def clrscr():
    if os.name == 'posix':
        _ = os.system('clear')
    else:
        _ = os.system('cls')

clrscr()

try:
    while True:
        miner = requests.get('https://minexmr.com/api/main/user/stats?address=WALLET-ADDRESS')
        bank = requests.get('https://minexmr.com/api/main/pool/stats?27285733')
        soupMiner = BeautifulSoup(miner.content, 'html.parser')
        soupBank = BeautifulSoup(bank.content, 'html.parser')

        dataMiner = soupMiner.find(text=True)
        formatedDataMiner = dataMiner[13:23]
        outputMiner = int(formatedDataMiner) * 0.000000000001
        
        dataBank = soupBank.find(text=True)
        position = dataBank.find('eur')
        startPos = position + 5
        endPos = position + 11

        if dataBank[endPos - 1:endPos].isnumeric():
            endPos = endPos
        else:
            endPos = endPos - 1
        
        if dataBank[endPos - 2:endPos - 1].isnumeric():
            endPos = endPos
        else:
            endPos = endPos - 2

        formatedDataBank = dataBank[startPos:endPos]
        tempValue = int(float(formatedDataBank))
        currentEurValue = tempValue * outputMiner
        
        if currentEurValue <= 0.99:
            print('\033[91m')
        else:
            print('\033[92m')
        
        print('\033[1m' + '  Current balance' + '\n\n'
              + '  XMR .......... ' + str(round(outputMiner, 6)) + ' xmr' + '\n'
              + '  EUR .......... ' + str(round(currentEurValue, 2)) + ' eur' + '\n\n\033[1;36m'
              + '  CER .......... ' + formatedDataBank + ' eur')
        
        sleep(300)
        
        clrscr()

except KeyboardInterrupt:
        pass

print('\033[0m')

# GTFO
